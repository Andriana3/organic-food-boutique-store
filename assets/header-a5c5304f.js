var C=Object.defineProperty;var E=(c,t,e)=>t in c?C(c,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):c[t]=e;var u=(c,t,e)=>(E(c,typeof t!="symbol"?t+"":t,e),e),y=(c,t,e)=>{if(!t.has(c))throw TypeError("Cannot "+e)};var m=(c,t,e)=>{if(t.has(c))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(c):t.set(c,e)};var d=(c,t,e)=>(y(c,t,"access private method"),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const g of o.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&s(g)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();class i{static get(t){return JSON.parse(localStorage.getItem(t))}static remove(t){localStorage.removeItem(t)}static set(t,e){localStorage.setItem(t,JSON.stringify(e))}}u(i,"CART_KEY","cart"),u(i,"CATEGORIES_KEY","categories"),u(i,"FILTER_KEY","filter"),u(i,"POPULAR_PRODUCTS_KEY","popular-products"),u(i,"DISCOUNTED_PRODUCTS_KEY","discounted-products");const l=i.CART_KEY,I={email:"",products:[]};var a,f;const n=class{static get(){return i.get(l)??I}static add(t,e=1){n.update(t,e)}static update(t,e=1){var o;const s=n.get(),r=d(o=n,a,f).call(o,s.products,t._id);r!==null?s.products[r]={...s.products[r],amount:e}:s.products.push({productId:t._id,product:t,amount:e}),i.set(l,s)}static delete(t){var r;const e=n.get(),s=d(r=n,a,f).call(r,e.products,t);s!==null&&(e.products.splice(s,1),i.set(l,e))}static getProduct(t){var r;const e=n.get(),s=d(r=n,a,f).call(r,e.products,t);return s!==null?e.products[s]:null}static getTotal(){const e=n.get().products.reduce((s,r)=>{const o=r.product.price*r.amount;return s+o},0);return Math.round(e*100)/100}static getProducts(){return n.get().products}static getEmail(){return n.get().email}static getCount(){return n.get().products.length}static setEmail(t){i.set(l,{...n.get(),email:t})}static clearCart(){i.set(l,I)}};let p=n;a=new WeakSet,f=function(t,e){const s=t.findIndex(({productId:r})=>r===e);return s!==-1?s:null},m(p,a);function h(){[...document.getElementsByClassName("cart-item-count")].map(t=>t.textContent=p.getCount())}export{h as u};
